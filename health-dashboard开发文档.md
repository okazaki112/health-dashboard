# 健康助手看板 - 开发文档

## 一、项目概述

### 1.1 项目简介
健康助手看板是一个基于纯前端技术栈的健康管理应用，旨在帮助用户记录、追踪和可视化个人健康数据。项目部署在 GitHub Pages 上，无需后端服务，所有数据存储在用户本地浏览器中。

### 1.2 项目目标
- 提供简洁直观的健康数据录入界面
- 实现多维度数据可视化展示
- 支持个性化健康目标管理
- 提供基础健康提醒功能
- 支持数据导出备份

### 1.3 部署方式
- **托管平台**: GitHub Pages
- **访问方式**: 静态网页，无需服务器
- **数据存储**: 浏览器本地存储（localStorage / IndexedDB）

---

## 二、技术架构

### 2.1 技术栈选型

| 技术维度 | 选型方案 | 版本 | 选型原因 |
|---------|---------|------|---------|
| 核心框架 | Vue 3 | ^3.4.x | 上手成本低，组合式API灵活，生态完善 |
| 构建工具 | Vite | ^5.x | 开发启动快，HMR高效，打包体积小 |
| 状态管理 | Pinia | ^2.x | 轻量级，TypeScript支持好，DevTools友好 |
| 路由管理 | Vue Router | ^4.x | Vue官方路由，支持路由懒加载 |
| UI组件库 | Element Plus | ^2.x | 组件丰富，表单/卡片/弹窗开箱即用 |
| 数据可视化 | ECharts | ^5.x | 功能强大，支持离线，文档完善 |
| 样式方案 | Less | ^4.x | CSS预处理，变量/混入支持 |
| 时间处理 | Day.js | ^1.x | 轻量（2KB），API友好，替代Moment.js |
| 数据导出 | FileSaver.js | ^2.x | 纯前端文件下载，支持多种格式 |
| CSV生成 | Papa Parse | ^5.x | CSV解析与生成，处理大数据集 |
| 部署工具 | gh-pages | ^6.x | 一键部署到GitHub Pages |

### 2.2 项目结构

```
health-dashboard/
├── public/                     # 静态资源目录
│   └── favicon.ico            # 网站图标
├── src/                        # 源代码目录
│   ├── assets/                 # 静态资源
│   │   ├── images/            # 图片资源
│   │   └── styles/            # 全局样式
│   │       ├── variables.less # 样式变量
│   │       ├── reset.less     # 样式重置
│   │       └── common.less    # 公共样式
│   ├── components/             # 公共组件
│   │   ├── common/            # 通用组件
│   │   │   ├── Header.vue     # 头部导航
│   │   │   ├── Sidebar.vue    # 侧边栏
│   │   │   └── Footer.vue     # 底部信息
│   │   ├── charts/            # 图表组件
│   │   │   ├── LineChart.vue  # 折线图
│   │   │   ├── BarChart.vue   # 柱状图
│   │   │   ├── PieChart.vue   # 饼图
│   │   │   └── GaugeChart.vue # 仪表盘
│   │   └── forms/             # 表单组件
│   │       ├── HealthForm.vue # 健康数据表单
│   │       └── GoalForm.vue   # 目标设置表单
│   ├── views/                  # 页面视图
│   │   ├── Home.vue           # 首页看板
│   │   ├── Profile.vue        # 个人档案
│   │   ├── Records.vue        # 数据记录
│   │   ├── Goals.vue          # 目标管理
│   │   ├── Reminders.vue      # 提醒设置
│   │   └── Export.vue         # 数据导出
│   ├── stores/                 # Pinia状态管理
│   │   ├── index.js           # Store入口
│   │   ├── profile.js         # 个人档案状态
│   │   ├── health.js          # 健康数据状态
│   │   ├── goals.js           # 目标管理状态
│   │   └── reminders.js       # 提醒状态
│   ├── utils/                  # 工具函数
│   │   ├── storage.js         # 本地存储工具
│   │   ├── date.js            # 日期处理工具
│   │   ├── export.js          # 数据导出工具
│   │   └── notification.js    # 通知工具
│   ├── router/                 # 路由配置
│   │   └── index.js           # 路由定义
│   ├── App.vue                 # 根组件
│   └── main.js                 # 入口文件
├── index.html                  # HTML模板
├── vite.config.js             # Vite配置
├── package.json               # 项目配置
├── jsconfig.json              # JS配置
└── README.md                  # 项目说明
```

### 2.3 架构图

```
┌─────────────────────────────────────────────────────────────┐
│                        用户界面层                            │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌────────┐ │
│  │ 首页看板 │ │ 个人档案 │ │ 数据记录 │ │ 目标管理 │ │ 提醒设置│ │
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘ └────────┘ │
├─────────────────────────────────────────────────────────────┤
│                        组件层                                │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐           │
│  │  图表组件    │ │  表单组件    │ │  通用组件    │           │
│  │ (ECharts)   │ │(Element Plus)│ │ (Header等)  │           │
│  └─────────────┘ └─────────────┘ └─────────────┘           │
├─────────────────────────────────────────────────────────────┤
│                        状态管理层                            │
│  ┌───────────────────────────────────────────────────┐     │
│  │              Pinia Stores                          │     │
│  │  profile │ health │ goals │ reminders │ settings  │     │
│  └───────────────────────────────────────────────────┘     │
├─────────────────────────────────────────────────────────────┤
│                        数据持久层                            │
│  ┌───────────────────────────────────────────────────┐     │
│  │         localStorage / IndexedDB                   │     │
│  │              (浏览器本地存储)                        │     │
│  └───────────────────────────────────────────────────┘     │
└─────────────────────────────────────────────────────────────┘
```

---

## 三、功能模块详细设计

### 3.1 个人健康档案模块

#### 3.1.1 功能描述
管理用户的基本健康信息，包括个人基础信息和健康背景。

#### 3.1.2 数据字段

| 字段名 | 类型 | 必填 | 说明 |
|-------|------|-----|------|
| id | String | 是 | 用户唯一标识 |
| nickname | String | 否 | 昵称 |
| avatar | String | 否 | 头像URL |
| gender | String | 是 | 性别（male/female/other） |
| birthDate | Date | 是 | 出生日期 |
| height | Number | 是 | 身高(cm) |
| weight | Number | 是 | 体重(kg) |
| bloodType | String | 否 | 血型（A/B/AB/O） |
| allergies | Array | 否 | 过敏史 |
| diseases | Array | 否 | 基础疾病 |
| medications | Array | 否 | 常用药物 |
| emergencyContact | Object | 否 | 紧急联系人 |
| createdAt | Date | 是 | 创建时间 |
| updatedAt | Date | 是 | 更新时间 |

#### 3.1.3 功能点
- **档案编辑**: 支持所有字段的增删改
- **BMI计算**: 根据身高体重自动计算BMI
- **年龄计算**: 根据出生日期自动计算年龄
- **隐私设置**: 可选择隐藏敏感信息
- **数据备份**: 支持导出档案为JSON文件

#### 3.1.4 页面设计
```
┌────────────────────────────────────────────────────────┐
│  个人健康档案                              [编辑] [导出]  │
├────────────────────────────────────────────────────────┤
│  ┌──────────────┐  ┌─────────────────────────────────┐ │
│  │              │  │  基础信息                        │ │
│  │    头像      │  │  昵称: 健康达人                  │ │
│  │   [上传]     │  │  性别: 男  年龄: 28岁            │ │
│  │              │  │  身高: 175cm  体重: 70kg         │ │
│  │              │  │  BMI: 22.9 (正常)               │ │
│  └──────────────┘  └─────────────────────────────────┘ │
│                                                        │
│  ┌─────────────────────────────────────────────────┐   │
│  │  健康背景                                        │   │
│  │  血型: A型                                       │   │
│  │  过敏史: 花粉、海鲜                               │   │
│  │  基础疾病: 无                                    │   │
│  │  常用药物: 维生素C                               │   │
│  └─────────────────────────────────────────────────┘   │
│                                                        │
│  ┌─────────────────────────────────────────────────┐   │
│  │  紧急联系人                                      │   │
│  │  姓名: 张三  关系: 父亲  电话: 138****1234       │   │
│  └─────────────────────────────────────────────────┘   │
└────────────────────────────────────────────────────────┘
```

### 3.2 健康数据记录模块

#### 3.2.1 功能描述
记录用户的日常健康指标数据，支持多维度数据录入和查询。

#### 3.2.2 数据字段

**健康记录表 (health_records)**

| 字段名 | 类型 | 必填 | 说明 |
|-------|------|-----|------|
| id | String | 是 | 记录唯一标识 |
| date | Date | 是 | 记录日期 |
| steps | Number | 否 | 步数 |
| distance | Number | 否 | 距离(km) |
| calories | Number | 否 | 消耗热量(kcal) |
| heartRate | Object | 否 | 心率数据 |
| heartRate.resting | Number | 否 | 静息心率 |
| heartRate.max | Number | 否 | 最大心率 |
| heartRate.avg | Number | 否 | 平均心率 |
| sleep | Object | 否 | 睡眠数据 |
| sleep.duration | Number | 否 | 睡眠时长(小时) |
| sleep.deep | Number | 否 | 深睡时长(小时) |
| sleep.light | Number | 否 | 浅睡时长(小时) |
| sleep.quality | Number | 否 | 睡眠质量评分(0-100) |
| water | Number | 否 | 饮水量(ml) |
| food | Object | 否 | 饮食记录 |
| food.breakfast | String | 否 | 早餐 |
| food.lunch | String | 否 | 午餐 |
| food.dinner | String | 否 | 晚餐 |
| food.calories | Number | 否 | 摄入热量(kcal) |
| mood | String | 否 | 心情(good/normal/bad) |
| weight | Number | 否 | 当日体重(kg) |
| bloodPressure | Object | 否 | 血压 |
| bloodPressure.systolic | Number | 否 | 收缩压 |
| bloodPressure.diastolic | Number | 否 | 舒张压 |
| notes | String | 否 | 备注 |
| createdAt | Date | 是 | 创建时间 |
| updatedAt | Date | 是 | 更新时间 |

#### 3.2.3 功能点
- **日常录入**: 表单录入各项健康指标
- **快速录入**: 常用数据一键录入
- **批量导入**: 支持CSV格式批量导入历史数据
- **日期筛选**: 按日期范围查询记录
- **数据编辑**: 支持修改历史记录
- **数据删除**: 支持删除错误记录

#### 3.2.4 页面设计
```
┌────────────────────────────────────────────────────────┐
│  健康数据记录              [今日] [本周] [本月] [自定义]  │
├────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────┐   │
│  │  快速录入 - 2024年2月28日                        │   │
│  │  ┌─────┐  ┌─────┐  ┌─────┐  ┌─────┐  ┌─────┐   │   │
│  │  │步数  │  │饮水  │  │睡眠  │  │体重  │  │心情  │   │   │
│  │  │6500 │  │1500 │  │7.5h │  │70kg │  │😊  │   │   │
│  │  │步   │  │ml   │  │     │  │     │  │     │   │   │
│  │  └─────┘  └─────┘  └─────┘  └─────┘  └─────┘   │   │
│  └─────────────────────────────────────────────────┘   │
│                                                        │
│  ┌─────────────────────────────────────────────────┐   │
│  │  详细记录                                        │   │
│  │  ┌─────────────────────────────────────────┐   │   │
│  │  │ 运动数据                                  │   │   │
│  │  │ 步数: [____] 步  距离: [____] km         │   │   │
│  │  │ 热量消耗: [____] kcal                    │   │   │
│  │  └─────────────────────────────────────────┘   │   │
│  │  ┌─────────────────────────────────────────┐   │   │
│  │  │ 心率数据                                  │   │   │
│  │  │ 静息心率: [____] bpm  平均: [____] bpm   │   │   │
│  │  └─────────────────────────────────────────┘   │   │
│  │  ┌─────────────────────────────────────────┐   │   │
│  │  │ 睡眠数据                                  │   │   │
│  │  │ 总时长: [____] h  深睡: [____] h         │   │   │
│  │  └─────────────────────────────────────────┘   │   │
│  │                    [保存]  [重置]              │   │
│  └─────────────────────────────────────────────────┘   │
└────────────────────────────────────────────────────────┘
```

### 3.3 数据可视化看板模块

#### 3.3.1 功能描述
将健康数据以图表形式直观展示，支持多维度数据分析。

#### 3.3.2 图表类型

| 图表名称 | 数据类型 | 展示内容 |
|---------|---------|---------|
| 步数趋势图 | 折线图 | 日/周/月步数变化趋势 |
| 心率分析图 | 折线图+区域图 | 心率变化区间 |
| 睡眠质量图 | 堆叠柱状图 | 深睡/浅睡/清醒时长分布 |
| 饮水完成度 | 仪表盘 | 每日饮水目标完成度 |
| 运动热力图 | 日历热力图 | 年度运动频率分布 |
| 体重趋势图 | 折线图 | 体重变化趋势 |
| 营养摄入图 | 饼图 | 三餐热量占比 |
| 心情分布图 | 饼图 | 心情状态统计 |

#### 3.3.3 功能点
- **时间维度切换**: 日/周/月/年视图
- **指标对比**: 多指标同图对比
- **目标对比**: 实际值vs目标值
- **异常高亮**: 超出正常范围的数据标红提醒
- **趋势分析**: 数据变化趋势箭头指示
- **数据钻取**: 点击图表查看详细数据

#### 3.3.4 页面设计
```
┌────────────────────────────────────────────────────────┐
│  健康看板                    [日] [周] [月] [年]        │
├────────────────────────────────────────────────────────┤
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐   │
│  │  今日步数     │ │  饮水完成度   │ │  睡眠时长    │   │
│  │   6,500      │ │     75%      │ │    7.5h     │   │
│  │  ↑ 12%       │ │   🎯 2000ml  │ │  质量: 良好  │   │
│  │  目标: 8000  │ │              │ │             │   │
│  └──────────────┘ └──────────────┘ └──────────────┘   │
│                                                        │
│  ┌─────────────────────────────────────────────────┐   │
│  │  本周步数趋势                                    │   │
│  │      ┌─────────────────────────────────────┐   │   │
│  │      │     ∧                               │   │   │
│  │      │    / \    ∧                         │   │   │
│  │      │   /   \  / \      ∧                 │   │   │
│  │      │  /     \/   \    / \                │   │   │
│  │      │ /              \-/   \               │   │   │
│  │      └─────────────────────────────────────┘   │   │
│  │        周一 周二 周三 周四 周五 周六 周日       │   │
│  └─────────────────────────────────────────────────┘   │
│                                                        │
│  ┌────────────────────┐  ┌────────────────────┐       │
│  │  心率分析          │  │  睡眠质量          │       │
│  │  [心率折线图]      │  │  [睡眠柱状图]      │       │
│  └────────────────────┘  └────────────────────┘       │
└────────────────────────────────────────────────────────┘
```

### 3.4 健康目标管理模块

#### 3.4.1 功能描述
设置和管理个性化健康目标，实时追踪目标完成进度。

#### 3.4.2 数据字段

**目标设置表 (health_goals)**

| 字段名 | 类型 | 必填 | 说明 |
|-------|------|-----|------|
| id | String | 是 | 目标唯一标识 |
| type | String | 是 | 目标类型 |
| name | String | 是 | 目标名称 |
| targetValue | Number | 是 | 目标值 |
| currentValue | Number | 否 | 当前值 |
| unit | String | 是 | 单位 |
| period | String | 是 | 周期（daily/weekly/monthly） |
| startDate | Date | 是 | 开始日期 |
| endDate | Date | 否 | 结束日期 |
| status | String | 是 | 状态（active/completed/paused） |
| reminder | Boolean | 否 | 是否开启提醒 |
| reminderTime | String | 否 | 提醒时间 |
| createdAt | Date | 是 | 创建时间 |

**目标类型枚举**
```javascript
const GOAL_TYPES = {
  steps: { name: '步数', unit: '步', icon: '🏃' },
  water: { name: '饮水', unit: 'ml', icon: '💧' },
  sleep: { name: '睡眠', unit: '小时', icon: '😴' },
  weight: { name: '体重', unit: 'kg', icon: '⚖️' },
  calories_burn: { name: '消耗热量', unit: 'kcal', icon: '🔥' },
  calories_intake: { name: '摄入热量', unit: 'kcal', icon: '🍔' },
  exercise: { name: '运动时长', unit: '分钟', icon: '💪' },
  heart_rate: { name: '静息心率', unit: 'bpm', icon: '❤️' }
}
```

#### 3.4.3 功能点
- **目标创建**: 设置各类健康目标
- **进度追踪**: 实时计算目标完成度
- **目标修改**: 支持调整目标值
- **目标暂停/恢复**: 临时暂停目标追踪
- **历史记录**: 查看目标完成历史
- **成就系统**: 达成目标获得成就徽章

#### 3.4.4 页面设计
```
┌────────────────────────────────────────────────────────┐
│  健康目标管理                              [+ 新增目标]  │
├────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────┐   │
│  │  🏃 每日步数目标                                  │   │
│  │  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  81%       │   │
│  │  当前: 6,500 步  /  目标: 8,000 步               │   │
│  │  还差: 1,500 步                          [编辑]  │   │
│  └─────────────────────────────────────────────────┘   │
│                                                        │
│  ┌─────────────────────────────────────────────────┐   │
│  │  💧 每日饮水目标                                  │   │
│  │  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  75%             │   │
│  │  当前: 1,500 ml  /  目标: 2,000 ml              │   │
│  │  还差: 500 ml                            [编辑]  │   │
│  └─────────────────────────────────────────────────┘   │
│                                                        │
│  ┌─────────────────────────────────────────────────┐   │
│  │  😴 每日睡眠目标                                  │   │
│  │  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  94%   │   │
│  │  当前: 7.5 小时  /  目标: 8 小时                 │   │
│  │  已达标 ✓                                [编辑]  │   │
│  └─────────────────────────────────────────────────┘   │
│                                                        │
│  ┌─────────────────────────────────────────────────┐   │
│  │  本周成就                                        │   │
│  │  🏅 步数达标3天  🏅 饮水达标5天  🏅 早睡早起2天   │   │
│  └─────────────────────────────────────────────────┘   │
└────────────────────────────────────────────────────────┘
```

### 3.5 基础提醒模块

#### 3.5.1 功能描述
提供健康提醒功能，帮助用户养成健康习惯。

#### 3.5.2 数据字段

**提醒设置表 (reminders)**

| 字段名 | 类型 | 必填 | 说明 |
|-------|------|-----|------|
| id | String | 是 | 提醒唯一标识 |
| type | String | 是 | 提醒类型 |
| title | String | 是 | 提醒标题 |
| message | String | 否 | 提醒内容 |
| time | String | 是 | 提醒时间（HH:mm） |
| repeat | String | 是 | 重复方式 |
| days | Array | 否 | 重复日期（周几） |
| enabled | Boolean | 是 | 是否启用 |
| sound | Boolean | 否 | 是否有声音 |
| createdAt | Date | 是 | 创建时间 |

**提醒类型枚举**
```javascript
const REMINDER_TYPES = {
  water: { name: '喝水提醒', icon: '💧', defaultInterval: 60 },
  exercise: { name: '运动提醒', icon: '🏃', defaultMessage: '该起来活动一下了' },
  medicine: { name: '服药提醒', icon: '💊', defaultMessage: '记得按时服药' },
  sleep: { name: '睡眠提醒', icon: '😴', defaultMessage: '该休息了' },
  measure: { name: '测量提醒', icon: '📊', defaultMessage: '该记录健康数据了' },
  custom: { name: '自定义提醒', icon: '⏰' }
}
```

#### 3.5.3 功能点
- **创建提醒**: 设置提醒类型、时间、重复方式
- **浏览器通知**: 使用 Notification API 推送通知
- **页面弹窗**: 页面内弹窗提醒
- **提醒开关**: 一键开启/关闭提醒
- **提醒历史**: 查看提醒记录

#### 3.5.4 页面设计
```
┌────────────────────────────────────────────────────────┐
│  健康提醒                                [+ 新增提醒]    │
├────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────┐   │
│  │  💧 喝水提醒                              [开启]  │   │
│  │  每 1 小时提醒一次                              │   │
│  │  工作时间: 09:00 - 18:00                        │   │
│  │  上次提醒: 10:30                     [编辑] [删除]│   │
│  └─────────────────────────────────────────────────┘   │
│                                                        │
│  ┌─────────────────────────────────────────────────┐   │
│  │  🏃 运动提醒                              [开启]  │   │
│  │  每天 15:00                                     │   │
│  │  该起来活动一下了                                │   │
│  │                               [编辑] [删除]      │   │
│  └─────────────────────────────────────────────────┘   │
│                                                        │
│  ┌─────────────────────────────────────────────────┐   │
│  │  😴 睡眠提醒                              [开启]  │   │
│  │  每天 22:30                                     │   │
│  │  该休息了，保证充足睡眠                          │   │
│  │                               [编辑] [删除]      │   │
│  └─────────────────────────────────────────────────┘   │
│                                                        │
│  ┌─────────────────────────────────────────────────┐   │
│  │  💊 服药提醒                              [关闭]  │   │
│  │  每天 08:00, 12:00, 20:00                       │   │
│  │  记得按时服药                         [编辑] [删除]│   │
│  └─────────────────────────────────────────────────┘   │
└────────────────────────────────────────────────────────┘
```

### 3.6 数据导出模块

#### 3.6.1 功能描述
将本地存储的健康数据导出为多种格式，便于备份和迁移。

#### 3.6.2 支持格式

| 格式 | 文件扩展名 | 适用场景 |
|-----|----------|---------|
| JSON | .json | 完整数据备份，支持导入恢复 |
| CSV | .csv | 数据分析，Excel打开 |
| PDF | .pdf | 打印报告，分享给医生 |

#### 3.6.3 功能点
- **格式选择**: 支持JSON/CSV/PDF格式
- **范围选择**: 全部数据或指定日期范围
- **模块选择**: 选择要导出的数据模块
- **数据导入**: 支持导入JSON备份文件
- **报告生成**: 生成健康报告PDF

#### 3.6.4 页面设计
```
┌────────────────────────────────────────────────────────┐
│  数据导出                                              │
├────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────┐   │
│  │  导出设置                                        │   │
│  │                                                  │   │
│  │  导出格式:  ○ JSON  ○ CSV  ○ PDF               │   │
│  │                                                  │   │
│  │  数据范围:  ○ 全部数据  ○ 指定日期范围          │   │
│  │           开始日期: [____] 结束日期: [____]     │   │
│  │                                                  │   │
│  │  数据模块:  ☑ 健康档案                          │   │
│  │            ☑ 健康记录                          │   │
│  │            ☑ 目标设置                          │   │
│  │            ☐ 提醒设置                          │   │
│  │                                                  │   │
│  │                          [预览]  [导出]         │   │
│  └─────────────────────────────────────────────────┘   │
│                                                        │
│  ┌─────────────────────────────────────────────────┐   │
│  │  数据导入                                        │   │
│  │                                                  │   │
│  │  支持导入 JSON 格式的备份文件                    │   │
│  │                                                  │   │
│  │  [选择文件]  backup_2024_02_28.json             │   │
│  │                                                  │   │
│  │  注意: 导入将覆盖现有数据，请先备份              │   │
│  │                                                  │   │
│  │                          [导入数据]              │   │
│  └─────────────────────────────────────────────────┘   │
└────────────────────────────────────────────────────────┘
```

---

## 四、数据结构设计

### 4.1 本地存储键名规范

```javascript
const STORAGE_KEYS = {
  // 用户档案
  PROFILE: 'health_profile',
  
  // 健康记录（按日期索引）
  RECORDS_PREFIX: 'health_records_',
  RECORDS_INDEX: 'health_records_index',
  
  // 目标设置
  GOALS: 'health_goals',
  
  // 提醒设置
  REMINDERS: 'health_reminders',
  
  // 应用设置
  SETTINGS: 'health_settings',
  
  // 成就记录
  ACHIEVEMENTS: 'health_achievements'
}
```

### 4.2 存储策略

#### 4.2.1 localStorage 使用策略
- **适用场景**: 少量数据（< 5MB）
- **存储内容**: 用户档案、目标设置、提醒设置、应用设置
- **数据格式**: JSON字符串

#### 4.2.2 IndexedDB 使用策略
- **适用场景**: 大量数据（> 5MB）
- **存储内容**: 健康记录历史数据
- **数据库结构**:
```javascript
const DB_CONFIG = {
  name: 'HealthDashboardDB',
  version: 1,
  stores: {
    records: {
      keyPath: 'id',
      indexes: ['date', 'createdAt']
    },
    achievements: {
      keyPath: 'id',
      indexes: ['date', 'type']
    }
  }
}
```

### 4.3 数据备份策略

```javascript
// 自动备份配置
const BACKUP_CONFIG = {
  // 本地自动备份间隔（天）
  autoBackupInterval: 7,
  
  // 最大备份数量
  maxBackupCount: 5,
  
  // 备份文件命名格式
  getBackupFileName: () => `health_backup_${dayjs().format('YYYY_MM_DD_HHmmss')}.json`
}
```

---

## 五、API设计（本地接口）

### 5.1 存储工具类 API

```javascript
// src/utils/storage.js

/**
 * 存储工具类
 */
export const storage = {
  /**
   * 保存数据到 localStorage
   */
  set(key, value) {},
  
  /**
   * 从 localStorage 获取数据
   */
  get(key, defaultValue = null) {},
  
  /**
   * 删除 localStorage 数据
   */
  remove(key) {},
  
  /**
   * 清空所有数据
   */
  clear() {},
  
  /**
   * 获取存储大小
   */
  getSize() {}
}

/**
 * IndexedDB 操作类
 */
export const idb = {
  /**
   * 初始化数据库
   */
  init() {},
  
  /**
   * 添加记录
   */
  add(storeName, data) {},
  
  /**
   * 批量添加
   */
  addBatch(storeName, dataList) {},
  
  /**
   * 更新记录
   */
  update(storeName, data) {},
  
  /**
   * 删除记录
   */
  delete(storeName, id) {},
  
  /**
   * 查询单条
   */
  get(storeName, id) {},
  
  /**
   * 查询列表
   */
  getAll(storeName) {},
  
  /**
   * 按索引查询
   */
  getByIndex(storeName, indexName, value) {},
  
  /**
   * 按范围查询
   */
  getByRange(storeName, indexName, start, end) {}
}
```

### 5.2 Pinia Store API

```javascript
// src/stores/health.js

export const useHealthStore = defineStore('health', {
  state: () => ({
    records: [],
    loading: false
  }),
  
  getters: {
    // 今日记录
    todayRecord: (state) => {},
    
    // 本周记录
    weekRecords: (state) => {},
    
    // 本月记录
    monthRecords: (state) => {},
    
    // 按日期范围查询
    recordsByRange: (state) => (start, end) => {}
  },
  
  actions: {
    // 添加记录
    async addRecord(data) {},
    
    // 更新记录
    async updateRecord(id, data) {},
    
    // 删除记录
    async deleteRecord(id) {},
    
    // 获取指定日期记录
    async getRecordByDate(date) {},
    
    // 批量导入
    async importRecords(records) {},
    
    // 导出数据
    async exportData(format, options) {}
  }
})
```

---

## 六、开发计划

### 6.1 开发阶段划分

#### 第一阶段：项目初始化与基础架构（2天）
- 创建 Vue 3 + Vite 项目
- 配置项目结构和基础依赖
- 实现路由配置和布局组件
- 实现本地存储工具类
- 实现状态管理基础架构

#### 第二阶段：核心功能开发（5天）
- **Day 1-2**: 个人健康档案模块
  - 档案信息表单
  - 数据存储与读取
  - BMI计算等功能
  
- **Day 3-4**: 健康数据记录模块
  - 数据录入表单
  - 数据列表展示
  - 数据编辑与删除
  
- **Day 5**: 健康目标管理模块
  - 目标创建表单
  - 进度计算逻辑
  - 目标完成展示

#### 第三阶段：数据可视化（3天）
- 封装 ECharts 图表组件
- 实现各类型图表
- 实现数据统计逻辑
- 实现时间维度切换

#### 第四阶段：辅助功能（2天）
- 实现提醒功能
- 实现数据导出功能
- 实现数据导入功能

#### 第五阶段：优化与部署（2天）
- 性能优化
- 响应式适配
- GitHub Pages 部署
- 测试与修复

### 6.2 里程碑

| 里程碑 | 完成时间 | 交付内容 |
|-------|---------|---------|
| M1 - 项目骨架 | 第2天 | 可运行的空项目框架 |
| M2 - 核心功能 | 第7天 | 档案、记录、目标功能可用 |
| M3 - 可视化 | 第10天 | 图表展示完整 |
| M4 - 功能完整 | 第12天 | 所有功能开发完成 |
| M5 - 正式发布 | 第14天 | 部署上线 |

---

## 七、部署方案

### 7.1 本地开发

```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 构建生产版本
npm run build

# 预览生产版本
npm run preview
```

### 7.2 GitHub Pages 部署

#### 7.2.1 配置文件

**vite.config.js**
```javascript
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'

export default defineConfig({
  plugins: [vue()],
  base: '/health-dashboard/', // GitHub仓库名
  build: {
    outDir: 'dist',
    assetsDir: 'assets'
  }
})
```

**package.json**
```json
{
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview",
    "deploy": "gh-pages -d dist"
  }
}
```

#### 7.2.2 部署步骤

```bash
# 1. 构建项目
npm run build

# 2. 部署到 GitHub Pages
npm run deploy

# 或者手动推送到 gh-pages 分支
git subtree push --prefix dist origin gh-pages
```

#### 7.2.3 GitHub Actions 自动部署

**.github/workflows/deploy.yml**
```yaml
name: Deploy to GitHub Pages

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Build
        run: npm run build
      
      - name: Deploy
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./dist
```

---

## 八、测试方案

### 8.1 单元测试

使用 Vitest 进行单元测试：

```javascript
// tests/storage.test.js
import { describe, it, expect, beforeEach } from 'vitest'
import { storage } from '@/utils/storage'

describe('Storage Utils', () => {
  beforeEach(() => {
    localStorage.clear()
  })
  
  it('should set and get value', () => {
    storage.set('test_key', { name: 'test' })
    expect(storage.get('test_key')).toEqual({ name: 'test' })
  })
  
  it('should return default value if not exists', () => {
    expect(storage.get('not_exists', 'default')).toBe('default')
  })
})
```

### 8.2 组件测试

使用 @vue/test-utils：

```javascript
// tests/components/HealthForm.test.js
import { mount } from '@vue/test-utils'
import HealthForm from '@/components/forms/HealthForm.vue'

describe('HealthForm', () => {
  it('should emit submit event with form data', async () => {
    const wrapper = mount(HealthForm)
    
    await wrapper.find('input[name="steps"]').setValue('8000')
    await wrapper.find('form').trigger('submit')
    
    expect(wrapper.emitted('submit')[0][0]).toEqual({
      steps: 8000
    })
  })
})
```

### 8.3 E2E 测试

使用 Cypress 进行端到端测试：

```javascript
// cypress/e2e/record.cy.js
describe('Health Record', () => {
  it('should add a new record', () => {
    cy.visit('/records')
    cy.get('input[name="steps"]').type('8000')
    cy.get('button[type="submit"]').click()
    cy.contains('保存成功')
  })
})
```

---

## 九、性能优化

### 9.1 代码层面优化

- **路由懒加载**: 使用动态导入减少首屏加载时间
- **组件按需引入**: Element Plus 按需加载
- **ECharts 按需引入**: 只引入需要的图表类型
- **虚拟列表**: 大量数据列表使用虚拟滚动

### 9.2 存储优化

- **数据分片**: 大量记录按月分片存储
- **过期清理**: 自动清理过期数据
- **压缩存储**: 对大对象进行压缩

### 9.3 渲染优化

- **防抖节流**: 输入和滚动事件使用防抖节流
- **缓存计算**: 使用 computed 缓存计算结果
- **图表复用**: 图表实例复用避免重复创建

---

## 十、安全考虑

### 10.1 数据安全

- **敏感信息加密**: 使用 crypto-js 对敏感数据加密
- **XSS防护**: 使用 Vue 自动转义，避免 v-html
- **输入验证**: 所有用户输入进行校验

### 10.2 隐私保护

- **本地存储**: 数据不上传服务器
- **导出脱敏**: 可选择脱敏后导出
- **清除功能**: 提供一键清除所有数据

---

## 十一、后续扩展

### 11.1 功能扩展
- 多用户切换
- 数据同步到云存储（如 GitHub Gist）
- PWA 支持，离线使用
- 多语言支持

### 11.2 数据对接
- 支持导入 Apple Health 数据
- 支持导入 Google Fit 数据
- 支持导入运动手环数据

---

## 附录

### A. 参考资源

- [Vue 3 官方文档](https://vuejs.org/)
- [Vite 官方文档](https://vitejs.dev/)
- [Element Plus 文档](https://element-plus.org/)
- [ECharts 文档](https://echarts.apache.org/)
- [Pinia 文档](https://pinia.vuejs.org/)
- [GitHub Pages 文档](https://docs.github.com/pages)

### B. 开发规范

- **代码风格**: 使用 ESLint + Prettier
- **提交规范**: 使用 Conventional Commits
- **分支策略**: Git Flow 工作流
- **命名规范**: 
  - 组件: PascalCase
  - 文件: kebab-case
  - 变量/函数: camelCase
  - 常量: UPPER_SNAKE_CASE

### C. 版本历史

| 版本 | 日期 | 更新内容 |
|-----|------|---------|
| v1.0.0 | 待定 | 初始版本发布 |
